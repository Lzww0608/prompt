# 💻 编程与开发 - 架构设计

## 系统架构设计

**描述：** 设计完整的系统架构方案

```
你是一名系统架构师。请为我设计以下系统：

**系统名称：** [请输入系统名称]

**系统描述：**
[请详细描述系统的功能和业务场景]

**非功能需求：**
- 用户规模：[例如：10万日活用户]
- 并发量：[例如：1000 QPS]
- 数据量：[例如：TB 级数据]
- 可用性要求：[例如：99.9%]
- 响应时间：[例如：<200ms]

**技术栈偏好：**
- 后端语言：[例如：Java、Go、Python]
- 数据库：[例如：MySQL、PostgreSQL、MongoDB]
- 缓存：[例如：Redis]
- 消息队列：[例如：Kafka、RabbitMQ]

**要求：**
1. 提供完整的系统架构设计
2. 说明各组件的职责和交互关系
3. 设计数据库表结构
4. 考虑水平扩展能力
5. 设计容错和降级方案
6. 提供安全方案（认证、授权、加密）
7. 画图说明架构（可用 ASCII 图描述）

请输出详细的架构设计方案。
```

## 微服务拆分设计

**描述：** 将单体应用拆分为微服务架构

```
你是一名微服务架构专家。请帮我将以下系统拆分为微服务：

**系统描述：**
[请描述当前系统的功能模块]

**现有问题：**
[说明当前单体架构存在的问题]

**业务模块：**
1. [模块1]
2. [模块2]
3. [模块3]

**要求：**
1. 提出微服务拆分方案
2. 确定服务边界和职责
3. 设计服务间通信方式（REST、RPC、消息队列）
4. 设计数据一致性方案
5. 考虑服务治理（服务发现、负载均衡、熔断降级）
6. 设计 API Gateway
7. 评估拆分的收益和挑战

请输出完整的微服务架构设计。
```

## 数据库设计

**描述：** 设计数据库表结构和索引方案

```
你是一名数据库架构师。请设计以下系统的数据库：

**系统描述：**
[请描述系统的业务场景]

**核心实体：**
1. [实体1]
2. [实体2]
3. [实体3]

**业务规则：**
[请描述关键的业务规则和数据约束]

**数据特征：**
- 读写比例：[例如：读多写少，10:1]
- 数据量：[例如：千万级]
- 查询特点：[例如：经常需要分页、聚合查询]

**要求：**
1. 设计完整的数据库表结构（ER 图或表结构描述）
2. 确定主键、外键和索引策略
3. 考虑分库分表策略（如需要）
4. 设计查询优化的索引方案
5. 考虑数据一致性和事务方案
6. 提供建表 SQL 语句

请输出详细的数据库设计方案。
```

## 缓存架构设计

**描述：** 设计多层缓存架构提升系统性能

```
你是一名缓存架构专家。请为以下系统设计缓存方案：

**系统描述：**
[请描述系统的业务场景]

**性能瓶颈：**
[请描述当前的性能问题]

**数据特征：**
- 热点数据：[描述访问频繁的数据]
- 冷数据比例：[例如：80%]
- 数据更新频率：[例如：每小时更新一次]

**要求：**
1. 设计多级缓存架构（本地缓存、分布式缓存）
2. 设计缓存更新策略（Cache Aside、Write Through、Write Back）
3. 考虑缓存穿透、缓存击穿、缓存雪崩的解决方案
4. 设计缓存一致性方案
5. 设计缓存预热和降级策略
6. 评估缓存命中率预期

请输出完整的缓存架构设计。
```

## 高并发系统设计

**描述：** 设计应对高并发的系统架构

```
你是一名高并发系统专家。请设计以下高并发系统：

**系统名称：** [例如：秒杀系统、抢购系统]

**并发特征：**
- QPS：[例如：10万]
- 同时在线用户：[例如：100万]
- 数据写入量：[例如：每秒1万条]

**核心功能：**
[描述系统的核心功能]

**约束条件：**
- 防超卖
- 防刷单
- 数据一致性
- 用户体验

**要求：**
1. 设计完整的高并发架构
2. 设计限流、熔断、降级方案
3. 设计消息队列削峰填谷
4. 考虑数据库的并发控制（乐观锁、悲观锁）
5. 设计分布式锁方案
6. 考虑 CDN 和静态资源加速
7. 设计监控和告警方案

请输出详细的高并发系统设计。
```

## 分布式系统设计

**描述：** 设计分布式系统的核心组件

```
你是一名分布式系统专家。请设计以下分布式场景的解决方案：

**场景描述：**
[请描述需要解决的分布式问题]

**具体需求：**
[详细说明功能需求]

**要求：**
1. 设计分布式事务方案（2PC、TCC、Saga、本地消息表）
2. 设计分布式锁实现（Redis、Zookeeper）
3. 设计分布式 ID 生成方案（Snowflake、UUID）
4. 设计分布式任务调度
5. 考虑数据同步和一致性
6. 设计服务发现和负载均衡
7. 考虑 CAP 理论下的权衡

请输出完整的分布式系统设计方案。
```

